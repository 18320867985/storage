<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
		<meta name="Keywords" content="塑金仓储信息管理系统" />
		<meta name="Description" content="塑金仓储信息管理系统" />
		<title>公告管理</title>
		<link rel="stylesheet" type="text/css" href="css/cstfont/iconfont.css" />
		<link rel="stylesheet" type="text/css" href="css/all.css" />
		<link rel="stylesheet" href="css/icheck/skins/flat/blue.css" />
		<link rel="stylesheet" type="text/css" href="css/bs-date/css/bootstrap-datetimepicker.min.css" />
	</head>

	<body>

		<div class="system iframe-body">

			<!--标题-->
			<h4 class="system-ttl">
				<span class="glyphicon glyphicon-list-alt iconttl"></span>
				公告管理
			</h4>

			<!--查询表单-->

			<form class="system-form  form-inline clearfix" novalidate="novalidate">

				<div class="form-group">
					<label for="txt_1">标题:</label>
					<input class="form-control rd-no  " type="text" name="" id="txt_1" value="" placeholder="==标题==" />

				</div>
				<div class="form-group">
					<label for="txt_2">起始时间:</label>
					<input class="form-control rd-no bs-date" type="text" name="" id="txt_2" value="" placeholder="==起始时间==" />

				</div>
				<div class="form-group">
					<label for="txt_3">结束时间:</label>
					<input class="form-control rd-no bs-date" type="text" name="" id="txt_3" value="" placeholder="==结束时间==" />

				</div>

				<div class="form-group">
					<button class="btn btn-primary rd-no" type="button">
					 	<span class="text-white  icon-search"></span> 
					 	查询
					 </button>

				</div>

				
			</form>
			
			
			<!--操作按钮-->
			<div class="form-group  system-btns ">
				<button class=" btn btn-primary rd-no" type="button">
						<span class=" icon-plus text-white"></span>
						新增
				</button>

				<button class="all-del btn btn-primary rd-no" type="button">
						<span class="  icon-trash text-white"></span>
						删除
				</button>
			</div>


			<!--列表-->
			<div class="system-list">
				<table class="table ">
					<thead>
						<tr>
							<th class="col-xs-1 text-center">
								<input class="ck-all" type="checkbox" name="" id="" value="" />
							</th>
							<th class="col-xs-4">
								标题
							</th>
							<th class="col-xs-2">
								查看
							</th>
							<th class="col-xs-2">
								发布日期
							</th>
							<th class="col-xs-3">
								面向
							</th>

						</tr>
					</thead>

					<tbody>

						<!--<tr>
							<td class="col-xs-1 text-center">
								<input type="checkbox" name="" id="" value="" />
							</td>
							<td class="col-xs-4 overflow-3-5">
								网站建设优惠大活动网站建设优惠大活动
							</td>
							<td class="col-xs-2  overflow-1-5">
								<a href="javascript:;">查看</a>
								
							</td>
							<td class="col-xs-2 overflow-1-5">
								2014-12-12 12:12:34
							</td>
							<td class="col-xs-3 overflow-2-5">
								人工与客户
							</td>

						</tr>-->
					</tbody>
				</table>

				<!--模板-->
				<script type="text/template" id="handlebars-templete">

					{{#lists}}
					<tr class="list-item">
							<td class="col-xs-1 text-center">
								<input  type="checkbox" name="" id="" value="" />
							</td>
							<td class="col-xs-4 overflow-3-5">
								{{a1}}
							</td>
							<td class="col-xs-2  overflow-1-5">
								<a href="javascript:;">查看</a>
								
							</td>
							<td class="col-xs-2 overflow-1-5">
							  {{#date  a3 "yyyy-MM-dd HH:mm:ss" }}
							   {{a3}}
							  {{/date}}
							  
							</td>
							<td class="col-xs-3 overflow-2-5">
								{{a4}}
							</td>

						</tr>
					{{/lists}}
				</script>
				<!-- 分页-->
				<div class="system-paging paging">

				</div>

			</div>

		</div>

		<script src="js/config.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/all.js" type="text/javascript" charset="utf-8"></script>
		<script src="css/icheck/icheck.min.js" type="text/javascript" charset="utf-8" id="icheck"></script>
		<script src="js/handlebars-v4.0.8.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="css/bs-date/js/bootstrap-datetimepicker-ch.js" type="text/javascript" charset="utf-8"></script>
				
		<!--[if lte IE 8]>
			<script src="js/respond.min.js" type="text/javascript" charset="utf-8"></script>
			<script src="js/ie8.js" type="text/javascript" charset="utf-8"></script>
		<![endif]-->

		<script type="text/javascript">
			
			bsDate.init(); // 日期
			
			// 分页
			paging.init({
				index: 1, //	当前页
				pageItem: 10, //  每页条数
				allItem: 100, //  总条数
				showCount: 5, //  显示的页码数目
				selector: ".paging", //分页父元素
				isAnimation: true, //是否显示动画
				isShowSkip: true, // 是否显示跳转页
				isShowCount: true, // 是否显示总页数
				isShowAllItems: true, // 是否显示总条目
			});

			// 显示第一页
			getDtatById(1);

			//点击事件
			$(document).on("paging_click", function(event, id) {
				//id 当前点击的元素的页码	
				//alert(id);	
				getDtatById(id);

			});

			// 异步加载数据
			function getDtatById(id) {
				$.get("json/system-gonggao.json", {
					id: id
				}, function(data) {
					data = data.constructor === Array ? data : $.parseJSON(data);
					for(var i in data) {
						data[i].a1 = id + "-" + data[i].a1;
					}
					var template2 = Handlebars.compile(document.getElementById("handlebars-templete").innerHTML);
					var html = template2({
						lists: data
					});

					$(".system-list .table tbody").html(html);

					// checkbox
					$('input').iCheck({
						checkboxClass: 'icheckbox_flat-blue',
						radioClass: 'iradio_flat-blue',
						increaseArea: '20%' // optional
					});
					$(".ck-all").iCheck('uncheck'); //将输入框的状态设置为
					system.check();
				});

			}

			// 删除数据
			$(".all-del").on("click", function() {

				var $lists = $("tbody .list-item input[type=checkbox]:checked");
				if($lists.length <= 0) {
					alert("你还没有选择数据？");
					return;
				}
				if(confirm("你确认要删除数据？")) {
					$lists.each(function() {
						$(this).closest(".list-item").remove();
					});
				}

			})
		</script>
	</body>

</html>